<!-- Dark mode toggle with smooth animation -->
<div class="fixed top-4 left-4 z-50">
    <!-- Progress Indicator -->
</div>

<!-- Leave Button -->
<div class="fixed top-4 right-4 z-50">
    <button 
        (click)="showLeaveConfirmation()"
        class="inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-lg text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors duration-200">
        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        الخروج
    </button>
</div>

<!-- Leave Confirmation Modal -->
<div *ngIf="leaveModalVisible" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-40">
  <div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-sm w-full border border-gray-200 dark:border-gray-700">
    <h3 class="text-lg font-bold text-gray-900 dark:text-white   mb-4 text-center">تأكيد الخروج</h3>
    <p class="text-gray-700 dark:text-gray-300 mb-6 text-center">هل أنت متأكد أنك تريد الخروج؟ سيتم فقدان التغييرات غير المحفوظة.</p>
    <div class="flex justify-center gap-4">
      <button (click)="confirmLeave()" class="px-4 py-2 text-white rounded-lg text-white bg-green-500">تأكيد الخروج</button>
      <button (click)="cancelLeave()" class="px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-700 transition">إلغاء</button>
    </div>
  </div>
</div>

<div dir="rtl" class="container mx-auto px-4 py-8 flex flex-col md:flex-row gap-8 max-w-6xl">

    <!-- Main Content -->
    <main
        class="w-full md:w-1/1 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 space-y-6 border border-gray-100 dark:border-gray-700">
        <div class="mb-8">
            <div class="flex items-center justify-between mb-2">
                <h2 class="text-xl font-bold text-gray-900 dark:text-white">{{ getCurrentStepTitle() }}</h2>
                <span class="text-sm text-gray-600 dark:text-gray-400">
                    {{ getCompletedStepsCount() }} من {{ getTotalStepsCount() }} مكتمل
                </span>
            </div>
            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                <div class="progress-bar-fill h-2 rounded-full"
                    [style.width.%]="progressPercentage"></div>
            </div>
        </div>
        <router-outlet></router-outlet>
    </main>
    <!-- Sidebar -->
    <aside class="w-full md:w-1/3 space-y-6 md:sticky md:top-6 md:h-[calc(100vh-3rem)] md:overflow-y-auto">

      
        <!-- Help Box with gradient -->
        <div
            class="bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 rounded-xl shadow-lg p-6 border border-gray-100 dark:border-gray-700">
            <div class="flex items-center gap-3 mb-4">
                <div class="p-2 rounded-full">
                    <svg class="w-6 h-6" style="color:#0061fe;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z" />
                        <path d="M11 11h2v6h-2zm0-4h2v2h-2z" />
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-gray-800 dark:text-white">هل تحتاج إلى مساعدة؟</h3>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-300 mb-5">فريق الدعم لدينا متاح 24/7 للإجابة على استفساراتك
            </p>
            <div class="flex flex-col gap-3">
                <button
                    class="flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white font-medium px-4 py-3 rounded-lg transition-all duration-200 transform hover:-translate-y-0.5 shadow-md hover:shadow-lg">
                    واتساب
                    <svg class="w-6 h-6  dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path fill="currentColor" fill-rule="evenodd" d="M12 4a8 8 0 0 0-6.895 12.06l.569.718-.697 2.359 2.32-.648.379.243A8 8 0 1 0 12 4ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10a9.96 9.96 0 0 1-5.016-1.347l-4.948 1.382 1.426-4.829-.006-.007-.033-.055A9.958 9.958 0 0 1 2 12Z" clip-rule="evenodd"/>
                        <path fill="currentColor" d="M16.735 13.492c-.038-.018-1.497-.736-1.756-.83a1.008 1.008 0 0 0-.34-.075c-.196 0-.362.098-.49.291-.146.217-.587.732-.723.886-.018.02-.042.045-.057.045-.013 0-.239-.093-.307-.123-1.564-.68-2.751-2.313-2.914-2.589-.023-.04-.024-.057-.024-.057.005-.021.058-.074.085-.101.08-.079.166-.182.249-.283l.117-.14c.121-.14.175-.25.237-.375l.033-.066a.68.68 0 0 0-.02-.64c-.034-.069-.65-1.555-.715-1.711-.158-.377-.366-.552-.655-.552-.027 0 0 0-.112.005-.137.005-.883.104-1.213.311-.35.22-.94.924-.94 2.16 0 1.112.705 2.162 1.008 2.561l.041.06c1.161 1.695 2.608 2.951 4.074 3.537 1.412.564 2.081.63 2.461.63.16 0 .288-.013.4-.024l.072-.007c.488-.043 1.56-.599 1.804-1.276.192-.534.243-1.117.115-1.329-.088-.144-.239-.216-.43-.308Z"/>
                      </svg>
                      
                      
                </button>
                <button
                    class="flex items-center justify-center gap-2 bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-3 rounded-lg transition-all duration-200 transform hover:-translate-y-0.5 shadow-md hover:shadow-lg">
                    تواصل معنا
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M20 4H4c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm0 2v.511l-8 6.223-8-6.222V6h16zM4 18V9.044l7.386 5.745a.994.994 0 0 0 1.228 0L20 9.044 20.002 18H4z" />
                    </svg>
                </button>
            </div>
        </div>

     
    </aside>

</div>

